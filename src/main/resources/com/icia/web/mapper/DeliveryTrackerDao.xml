<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.icia.web.dao.DeliveryTrackerDao">

<resultMap type="com.icia.web.model.OrderList" id="orderDeliveryListResultMap">
   <id column="ORDER_SEQ" property="orderSeq" />
   <result column="ORDER_NUM" property="orderNum" />
   <result column="DELIVER_COMPANY" property="deliverCompany" />
</resultMap>

<select id="selectNeedDeliveryTracker" resultMap="orderDeliveryListResultMap">
SELECT
    O.ORDER_SEQ,
    ORDER_NUM,
    DELIVER_COMPANY
FROM
    ORDER_LIST O,
    DELIVERY D
WHERE
    DELIVERY_STATUS = '2'
    AND O.ORDER_SEQ = D.ORDER_SEQ
</select>

<update id="updateDeliveryStatus" parameterType="String">
UPDATE
    ORDER_LIST
SET
    DELIVERY_STATUS = '3'
WHERE
    ORDER_SEQ = #{value}
</update>

<select id="selectDeliveryTracker" parameterType="String" resultMap="orderDeliveryListResultMap">
SELECT
    O.ORDER_SEQ,
    ORDER_NUM,
    DELIVER_COMPANY
FROM
    ORDER_LIST O,
    DELIVERY D
WHERE
    O.ORDER_SEQ = #{value}
	AND O.ORDER_SEQ = D.ORDER_SEQ
</select>
</mapper>
